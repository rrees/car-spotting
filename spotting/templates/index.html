{% extends 'layout.html' %}

{% block title %}
Front page
{% endblock %}

{% block navigation %}
{% endblock %}

{% block content %}
<div class="login-panel">

        <header>
            <h1>Car spotter</h1>
        </header>
        <p><button id="login-button" class="btn">Login</button></p>
</div>
{% endblock %}

{% block scripts %}
    <script src="https://cdn.auth0.com/js/lock-passwordless-2.2.min.js"></script>
    <script type="text/javascript">
    var clientID = '{{app_config.auth0.client_id}}';
    var domain = '{{app_config.auth0.domain}}';

    const lock = new Auth0LockPasswordless(clientID, domain);

    function open() {
      lock.magiclink({
        callbackURL: '{{callback_url}}',
        authParams: {
        scope: 'openid email'  // Learn about scopes: https://auth0.com/docs/scopes 
        }
      });
    }

    const loginButton = document.getElementById('login-button');

    loginButton.addEventListener('click', open);
    </script>
{% endblock %}